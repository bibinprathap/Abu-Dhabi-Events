(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,n){e.exports=n(27)},23:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(6),c=n.n(r),i=(n(23),n(2));var l=n(14),s=n(12),u="https://app.ticketmaster.com/discovery/v2/events.json?apikey=".concat("k7WafyB240GbvXdwJ5wgeCq4LiceFjnY","&locale=*&countryCode=ae&size=").concat(200,"&sort=date,asc");function m(e){var t=e._embedded.events.map((function(e){var t=e._embedded.venues[0],n=t.id,a=t.name,o=(t.city,t.location),r=void 0!==o&&null!==o&&!1!==o&&Object.values(o);return!1===r&&(r=[0,0]),{idVenue:n,nameVenue:a,cleanCoordinate:r.filter((function(e){return e})).map((function(e){return Number(e)})),event:e}})).filter((function(e){return e.cleanCoordinate.length>0})),n=t.map((function(e){return e.idVenue})),a={};return n.forEach((function(e){return a[e]=t.filter((function(t){return t.idVenue===e}))})),a}function f(e){var t=Object.keys(e),n={};return t.forEach((function(a,o){var r=e[t[o]][0].nameVenue;return n[a]={center:e[a][0].cleanCoordinate,bearing:27,zoom:17,speed:1,curve:.7,pitch:45,name:r}})),n}var d=n(16),v=n.n(d);function p(e){var t=e.events,n=e.id,a=e.isOnScreen;return o.a.createElement("section",{className:"event"},o.a.createElement(v.a,{onChange:function(e){return e&&a(n)}},(function(e){e.isVisible;return o.a.createElement("p",{className:"name-location"},t[n][0].nameVenue)})),o.a.createElement("div",{className:"cards"},t[n].map((function(e){var t=e.event.name,n=e.event.dates.start.localDate,a=e.event.dates.start.localTime;return o.a.createElement("div",{key:Math.random(),className:"card"},o.a.createElement("p",{className:"name-event"},t),o.a.createElement("p",null,n),o.a.createElement("p",null,a))}))))}var h={timer:null,stop:function(){clearTimeout(this.timer)},scrollTo:function(e,t){var n,a=1e3,o={outQuint:function(e,t,n,a,o){return a*((t=t/o-1)*t*t*t*t+1)+n}},r=document.getElementById(e),c=r.offsetTop,i=r.offsetHeight,l=document.body,s=document.documentElement,u=Math.max(l.scrollHeight,l.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight),m=window.innerHeight,f=window.pageYOffset,d=c-f,v=u-m,p=v<d?v-(u-c-i+f):d;n=Date.now(),this.timer&&clearInterval(this.timer),this.timer=setTimeout((function e(){var r,c=Date.now()-n;c>a&&clearTimeout(this.timer),c/a>1?(clearTimeout(this.timer),t&&t()):(r=o.outQuint(0,c,f,p,a),window.scrollTo(0,r),this.timer=setTimeout(e,10))}),10)}};function b(e){var t=e.venues,n=e.passId,r=Object.keys(t),c=Object(a.useState)(!1),l=Object(i.a)(c,2),s=l[0],u=l[1],m=function(){return u(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"btn-open",onClick:function(){return u(!0)}},"All venues"),o.a.createElement("div",{className:"container-venues ".concat(s?"open":"close")},o.a.createElement("div",{className:"venue-page "},o.a.createElement("button",{className:"btn-close",onClick:m},"close"),r.map((function(e){return o.a.createElement("div",{className:"".concat(e," venue"),onClick:function(){return function(e){m(),n(e)}(e)}},o.a.createElement("h1",null," ",t[e].name))})))))}var E={center:[54.35518,24.48276],bearing:27,zoom:18,speed:1,curve:.7,pitch:45};function g(e){var t=e.infoVenues,n=e.map,r=e.events,c=Object.keys(t),l=Object(a.useState)(""),s=Object(i.a)(l,2),u=s[0],m=s[1],f=function(e){console.log(e),m(e)};return Object(a.useEffect)((function(){n.flyTo(t[u]||E)}),[u]),o.a.createElement("div",{className:"bk"},o.a.createElement("button",{className:"btn-next",onClick:function(){return function(e){var t=c.indexOf(e)+1;t<c.length&&h.scrollTo(c[t])}(u)}},"next venue"),o.a.createElement(b,{venues:t,passId:function(e){m(e),h.scrollTo(e)}}),o.a.createElement("section",{id:"first",className:"section-event"},o.a.createElement("h1",null,o.a.createElement("span",{className:"white"},"Upcoming")," events in the",o.a.createElement("span",null,"UAE"),"."),o.a.createElement("p",null,"Scroll down")),c.map((function(e){return o.a.createElement("section",{key:Math.random(),className:"section-event",id:e},o.a.createElement(p,{id:e,events:r,isOnScreen:f}))})))}var y=n(12);var k=n(25),w=(y.accessToken="pk.eyJ1IjoiZmxhdmlvYmVybmFzY29uaSIsImEiOiJjazk5b3Q0amcwMWhhM2ZwN213N3liZ3FtIn0.ByKkoMxbBq27kygkf1KqlA",new y.Map({container:"map",style:"mapbox://styles/mapbox/dark-v10",center:[3.18,40.01],zoom:3,bearing:27,pitch:45}));function j(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({}),d=Object(i.a)(c,2),v=d[0],p=d[1];return Object(a.useEffect)((function(){var e;(e=w).on("load",(function(){for(var t,n=e.getStyle().layers,a=0;a<n.length;a++)if("symbol"===n[a].type&&n[a].layout["text-field"]){t=n[a].id;break}e.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},t)})),l.a.get(u).json().then((function(e){var t=m(e),n=f(m(e));r(t),p(n),function(e,t){var n=Object.keys(e);t.addControl(new s.FullscreenControl),n.forEach((function(n){var a=document.createElement("div");a.className="marker",new s.Marker(a).setLngLat(e[n].center).addTo(t)}))}(f(m(e)),w)})).catch((function(e){return console.log(e)}))}),[]),k.isEmpty(v)?o.a.createElement(o.a.Fragment,null):o.a.createElement(g,{events:n,infoVenues:v,map:w})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.c62b1395.chunk.js.map